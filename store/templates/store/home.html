{% extends 'store/base.html' %}

{% block title %}Home - Vinyl Store{% endblock %}

{% block content %}
<div class="hero">
    <h1>ðŸŽµ Welcome to Vinyl Store</h1>
    <p>Discover rare vinyl records from talented vendors around the world</p>
    <div class="hero-buttons">
        {% if request.session.user_type != 'customer' %}
            <a href="{% url 'customer_register' %}" class="btn btn-primary">Sign Up as Customer</a>
        {% endif %}
        {% if request.session.user_type != 'vendor' %}
            <a href="{% url 'vendor_register' %}" class="btn btn-secondary">Become a Vendor</a>
        {% endif %}
        <a href="{% url 'product_list' %}" class="btn btn-primary">Browse Vinyl</a>
    </div>
</div>

<section class="featured-products">
    <h2 style="font-size: 1.8rem; margin-bottom: 1.5rem; color: var(--primary-color);">Featured Products</h2>
    <div class="product-grid">
        {% for product in featured_products %}
            <div class="product-card">
                {% if product.media.all %}
                    {% with primary=product.media.filter|dictsort:"isPrimary" %}
                        <img src="{{ primary.0.mediaURL.url }}" alt="{{ product.productName }}" class="product-image">
                    {% endwith %}
                {% else %}
                    <div style="width: 100%; height: 250px; background-color: var(--light-color); display: flex; align-items: center; justify-content: center; color: #999;">No image</div>
                {% endif %}
                <div class="product-info">
                    <h3 class="product-name">{{ product.productName }}</h3>
                    <p class="product-price">${{ product.price|floatformat:2 }}</p>
                    <p class="product-stock {% if product.stockQuantity == 0 %}out{% elif product.stockQuantity < 5 %}low{% endif %}">
                        {% if product.stockQuantity > 0 %}
                            {{ product.stockQuantity }} in stock
                        {% else %}
                            Out of stock
                        {% endif %}
                    </p>
                    <div class="product-actions">
                        <a href="{% url 'product_detail' product.productID %}" class="btn btn-primary btn-small">View Details</a>
                    </div>
                </div>
            </div>
        {% empty %}
            <p style="grid-column: 1/-1; text-align: center; color: #999;">No products available yet. Check back soon!</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
